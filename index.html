<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<title>My New Component</title>
	<link rel=icon href=./favicon.ico>

	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=5,user-scalable=yes" />
	<link href="my-new-component" rel="styleSheet" />
	<!-- <link href="demo/prism.min.css" rel="styleSheet" /> -->
	<link href="demo/prism-tomorrow.min.css" rel="styleSheet" />
	<link href="demo/demo.css" rel="styleSheet" />
	<script src="my-new-component.js" type="module"></script>
	<script src="demo/prism.js" defer></script>
</head>

<body>
	<main>
		<h1>My New Component</h1>
	</main>

	<script>
		function copyButton(el, target, echo) {
			el.addEventListener("click", (event) => {
				window.getSelection().removeAllRanges(); // Clear previous clipboard
				var range = document.createRange();
				range.selectNode(target);
				window.getSelection().addRange(range);

				try {
					document.execCommand("copy");
				} catch (err) {}
			});
		}

		document.querySelectorAll(".code").forEach(function(el) {
			el.insertAdjacentHTML("beforeend", "<button class='n-btn' type='button'>Copy</button>");
			copyButton(el.querySelector("button"), el.querySelector("pre"));
		});

		["css", "js"].forEach((extension) => {
			fetch(`my-new-component.min.${extension}.size`)
				.then((response) => response.text())
				.then((text) => {
					document.querySelectorAll(`[href="my-new-component.min.${extension}"]`).forEach(el => {
						el.dataset.size = `${parseFloat(text / 1024).toFixed(1)} KB`
					})
				});
		});

		fetch(`package.json`)
			.then((response) => response.json())
			.then((text) => {
				document.querySelector("h1").dataset.version = text.version.split(".")[0] + "." + text.version.split(".")[1];
			});
	</script>
</body>

</html>